{% extends "dwarves/layout.html" %}
{% load tags %}

{% block body %}
<h1>{{ page_title }}</h1>

    {% if messages %}
    {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
            <div class="alert alert-danger" role="alert">
                {{ message }}
            </div>
        {% else %}
            <div class="alert alert-success" role="alert">
                {{ message }}
            </div>
        {% endif %}
    {% endfor %}
    {% endif %}

    {% for upgrade in upgrades %}
    <div class="containter">
        <h3> {{ upgrade.name }} </h3>
        Effect: {{ upgrade|get_effect }}
        <br>Cost: 
        <ul>
            {% for mineral in upgrade.cost.all %}
                <li>{{ mineral.name }} : {{ mineral.value }}</li>
            {% endfor %}
        </ul>
        <form action="{% url 'buy_upgrade' dwarf.name upgrade.name %}" method="post">
            {% csrf_token %}
            <input type="submit" name={{ upgrade.name }} value="Buy Upgrade">
        </form>
    </div>
    {% endfor %}



{% endblock %}